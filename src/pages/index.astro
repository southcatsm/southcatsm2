---
import BaseLayout from "@/layouts/BaseLayout.astro";
import { Icon } from "astro-icon/components";
import LinkCard from "@/components/mdx/LinkCard.astro";
import FeatureCard from "@/components/mdx/FeatureCard.astro";
import TimeLine from "@/components/mdx/TimeLine.astro";
import { getCollection } from "astro:content";
import MainCard from "@/components/MainCard.astro";

const abp = await getCollection("blog");
const ap = import.meta.env.PROD ? abp.filter((post) => !post.data.draft) : abp;
const posts = ap.length;
---
<BaseLayout title="ä¸»é¡µ">
	<style>
	    @keyframes fade-in {
	        from { opacity: 0; transform: translateY(20px); }
	        to { opacity: 1; transform: translateY(0); }
	    }
	    .animate-fade-in {
	        animation: fade-in 1s ease-out forwards;
	    }
	    .hover-scale {
	        transition: transform 0.3s ease, box-shadow 0.3s ease;
	    }
	    .hover-scale:hover {
	        transform: translateY(-5px);
	        box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
	    }
	    .gradient-text {
	        background-clip: text;
	        -webkit-background-clip: text;
	        color: transparent;
	    }
	</style>
    <section class="hero min-h-[60vh] bg-gradient-to-br from-base-200 to-base-300 rounded-3xl mb-12">
        <div class="hero-content text-center">
            <div class="max-w-4xl animate-fade-in">
                <h1 class="text-4xl md:text-5xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">
                    ğŸŒŒ æ¬¢è¿æ¥åˆ°southcatsmçš„åšå®¢ï¼
                </h1>
                <p class="text-xl md:text-2xl mb-8 text-base-content/80" id="typewriter-text"></p>
                <div class="flex flex-wrap justify-center gap-4">
					<a href="blog" target="_blank">
						<button class="btn btn-primary gap-2">
							å¼€å§‹æ¢ç´¢
							<Icon name="lucide:compass" class="w-5 h-5" />
						</button>
					</a>
                    <a href="about" target="_blank">
						<button class="btn btn-outline btn-secondary gap-2">
							å…³äºç¬”è€…
							<Icon name="lucide:user" class="w-5 h-5" />
						</button>
					</a>
                </div>
            </div>
        </div>
    </section>

    <MainCard title="ğŸ“Š åšå®¢æ•°æ®" class="mb-12">
        <div class="stats stats-vertical md:stats-horizontal shadow w-full bg-base-200">
            <div class="stat">
                <div class="stat-figure text-primary">
                    <Icon name="lucide:file-text" class="w-8 h-8" />
                </div>
                <div class="stat-title">æ–‡ç« æ€»æ•°</div>
                <div class="stat-value text-primary">{posts-1}</div>
                <div class="stat-desc">ç¯‡ç²¾å½©å†…å®¹</div>
            </div>
            
            <div class="stat">
                <div class="stat-figure text-secondary">
                    <Icon name="lucide:letter-text" class="w-8 h-8" />
                </div>
                <div class="stat-title">æ–‡ç« æ€»å­—æ•°</div>
                <div class="stat-value text-secondary">â‰¥10.7k</div>
                <div class="stat-desc">ä¸ªæ–‡å­—</div>
            </div>
            
            <div class="stat">
                <div class="stat-figure text-accent">
                    <Icon name="lucide:heart" class="w-8 h-8" />
                </div>
                <div class="stat-title">ç»Ÿè®¡è·å¾—</div>
                <div class="stat-value text-accent">â‰¥97%</div>
                <div class="stat-desc">çš„å¥½è¯„ç‡</div>
            </div>
        </div>
    </MainCard>
    <MainCard title="âœ¨ç»¼åˆç‰¹è‰²" class="mb-12">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <FeatureCard
                title="åˆ›æ„æ— é™"
                description="åƒå¥‡ç™¾æ€ªæ— æ‰€ä¸æœ‰"
                icon="lucide:creative-commons"
                color="oklch(0.7 0.2 150)"
                hoverEffect="shadow-lg"
            />
            <FeatureCard
                title="å›½é™…åŒ–"
                description="æ”¯æŒä¸­è‹±ç½‘é¡µï¼ˆæ­£åœ¨ç ”å‘å…¶ä»–è¯­è¨€ï¼‰"
                icon="lucide:earth"
                color="oklch(0.7 0.2 250)"
                hoverEffect="shadow-lg"
            />
            <FeatureCard
                title="ä¸»é¢˜åˆ‡æ¢"
                description="é»‘å¤œ/ç™½æ—¥é£æ ¼å¯é€‰"
                icon="lucide:palette"
                color="oklch(0.7 0.2 350)"
                hoverEffect="shadow-lg"
            />
        </div>
    </MainCard>

    <MainCard title="ğŸš€ å¿«æ·å¯¼èˆª" class="mb-12">
        <div class="grid grid-cols-2 gap-4">
            <LinkCard
                title="åšå®¢"
                desc="ç‚¹æ»´çç¢çš†çƒ‚æ¼«"
                url="/blog"
                img="/about.png"
                badge="æŒç»­æ›´æ–°"
                target="_self"
            />
            <LinkCard
                title="ä½œå“"
                desc="å¥‡æ€ªçš„åˆ›æ„ä¸å®è·µ"
                url="/project"
                img="/code.png"
                badge="åƒå¥‡ç™¾æ€ª"
                target="_self"
            />
            <LinkCard
                title="å…³äº"
                desc="äº†è§£ç¬”è€…"
                url="/about"
                img="/acco.png"
                badge="å³åˆ»äº†è§£"
                target="_self"
            />
            <LinkCard
                title="å‹é“¾"
                desc="å¿—åŒé“åˆçš„æœ‹å‹ä»¬"
                url="/friend"
                img="/linkc.png"
                badge="æœ€ä½³ä¼™ä¼´"
                target="_self"
            />
        </div>
    </MainCard>

    <MainCard title="ğŸ“… è¿‘æœŸåŠ¨æ€" class="mb-12">
        <TimeLine items={[
            {
                year: "2025-02",
                event: "å¼€å§‹å…¨çº¿é‡ç»„",
            },
			{
			    year: "2024-06",
			    event: "æ›´å¤šåŠŸèƒ½!",
			},
            {
                year: "2024-04",
                event: "å…¨ç«™åŸºæœ¬å»ºæˆ",
            },
            {
                year: "2023-09",
                event: "æ­£å¼å»ºç«™",
            },
			{
			    year: "2021-09",
			    event: "åœ¨Githubå»ºç«™",
			}
        ]} />
    </MainCard>
    <div class="divider my-12">
        <Icon name="lucide:flower" class="w-10 h-10 text-primary" />
        <span class="mx-4 text-lg font-medium">æ„Ÿè°¢åˆ°è®¿</span>
        <Icon name="lucide:flower" class="w-10 h-10 text-primary" />
    </div>
    <script>
		async function executed() {
		    try {
		        const response = await fetch('https://v1.hitokoto.cn/?c=a&c=b&c=c&c=i&c=d');
		        const data = await response.json();
		        typeWrit(data.hitokoto);
		    } catch (error) {
		        typeWrit("ä»£ç æ˜¯ç”¨æ¥è®©äººè¯»çš„ï¼Œåªæ˜¯é¡ºä¾¿è®©æœºå™¨æ‰§è¡Œè€Œå·²");
				console.log("......");
		    }
		}
		function typeWrit(text, speed = 150) {
		    const element = document.getElementById('typewriter-text');
		    if (!element) return;
		    element.innerHTML = '<span class="caret">|</span>';
		    let i = 0;
		    function typing() {
		        if (i < text.length) {
		            element.innerHTML = text.substring(0, i+1) + '<span class="caret">|</span>';
		            i++;
		            setTimeout(typing, speed);
		        } else element.innerHTML = text;
		    }
		    typing(); 
		}
		document.addEventListener('astro:page-load', executed);
    </script>
</BaseLayout>